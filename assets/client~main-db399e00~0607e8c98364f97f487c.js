"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7270],{8027:(e,t,a)=>{a.d(t,{FV:()=>n,ZP:()=>c,_I:()=>i,sc:()=>r});const s=(0,a(9829).oM)({name:"notifications",initialState:{stack:[]},reducers:{setNotification:(e,t)=>{const{notification:a}=t.payload;a.id=a.id||Date.now(),a.isClosed=a.isClosed||!1,e.stack.push(a)},removeNotification:(e,t)=>{e.stack=e.stack.filter((e=>e.id!==t.payload.id))},setCloseNotification:(e,t)=>{const{id:a}=t.payload;e.stack=e.stack.map((e=>e.id===a?{...e,isClosed:!0}:e))}}}),{setNotification:r,removeNotification:n,setCloseNotification:i}=s.actions,c=s},7627:(e,t,a)=>{a.d(t,{AF:()=>v,UL:()=>L,ZP:()=>A,hF:()=>O,ik:()=>k,ql:()=>w,rw:()=>x,v2:()=>b,w6:()=>$});var s=a(9829),r=a(6151),n=a(8656),i=a(6924),c=a(7344),o=a(6084),d=a(9033),l=a(4581),u=a(3067),g=a(4481),h=a(9216);const p=`${(0,d.Lq)()}/search/query`,y=`${(0,d.Lq)()}/category`,f={content:[]},S={query:"",expanded:!1,results:f,pending:!1,doneOnce:!1,error:!1,popularSearches:[],searchSessionId:0,quickSearchCategories:[]},m=(e,t,a)=>({data:(0,l.zP)(e,t,a),score:(null==a?void 0:a.score)||("game"===t?1:0)});function q(e){let{site:t,device:a,hits:s}=e;const r=function(e){var t,a;let{site:s,device:r,hits:n}=e;const i=(null==n||null===(t=n.categories)||void 0===t?void 0:t.map((e=>m(s,"category",e))))||[],c=(null==n||null===(a=n.games)||void 0===a?void 0:a.map((e=>m(s,"game",e))))||[];return{categories:i,games:"mobile"===r?c.filter((e=>e.data.mobile)):c}}({site:t,device:a,hits:s}),n=[...r.categories.map((e=>({...e,category:!0}))),...r.games];return n.sort(((e,t)=>t.score-e.score)),"mobile"===a&&n.splice(50),n}function C(e){let{state:t,query:a,numberOfResults:s=0,isQuickCategorySearch:r=!1}=e;const c=(0,i.ZM)(t),o=(0,n.Wj)(t),d=s>0?"success":"empty";(0,u.A)({category:"search",action:"results",label:o,data:{query:a,result:d,numberOfResults:s,searchSessionId:c,isQuickCategorySearch:r}})}const $=(0,s.hg)("search/fetchSearch",(async(e,t)=>{if(e.query.length<2)return{content:[]};const a=t.getState(),s=(0,c.lH)(a),n=(0,r.Si)(a),i=(0,r.Zn)(a),d=(0,o.d)(a),l=await fetch(`${p}/${s.id}?q=${encodeURIComponent(e.query)}&device=${n}&country=${i}${d?`&experiment=${d}`:""}`),u=await l.json();if(!u.categories.length&&!u.games.length)return C({state:a,query:e.query}),{content:[]};const g=q({site:s,device:n,hits:u});return C({state:a,query:e.query,numberOfResults:g.length}),{content:g}})),v=(0,s.hg)("search/fetchQuickSearchCategories",(async(e,t)=>{const a=t.getState(),s=(0,c.lH)(a),n=(0,r.Zn)(a),i=(0,r.Si)(a),o=await fetch(`${(0,d.Lq)()}/quicksearch?site=${s.id}&country=${n}&device=${i}`);return(await o.json()).map((e=>{let{title:t,slug:a}=e;return{title:t,slug:a,url:(0,g.Ep)(s,"category",a)}}))})),k=(0,s.hg)("search/fetchSearchCategoryResults",(async(e,t)=>{if(!e)return{content:[]};const a=t.getState(),s=(0,c.lH)(a),n=(0,r.Si)(a),i=(0,r.Zn)(a),d=(0,o.d)(a),l=await fetch(`${y}/${encodeURIComponent(e)}?site=${s.id}&device=${n}&country=${i}${d?`&experiment=${d}`:""}`),u=await l.json(),g={categories:u.related_categories||[],games:u.games||[]};return C({state:a,query:e,numberOfResults:g.categories.length+g.games.length,isQuickCategorySearch:!0}),{content:q({site:s,device:n,hits:g})}})),_=(0,s.oM)({name:"search",initialState:S,reducers:{closeSearch(e){e.expanded=!1,e.doneOnce=!1,e.error=!1,e.pending=!1,e.results=f},openSearch(e){e.searchSessionId=(0,h.V)(),e.expanded=!0,e.query=""},setSearchQuery(e,t){e.query=t.payload.query},resetSearch(e){e.query="",e.results=f,e.pending=!1,e.doneOnce=!1,e.error=!1},closeSearchIfOpen(e){e.expanded&&(e.expanded=!1)}},extraReducers:e=>{e.addCase($.pending,(e=>{e.pending=!0})).addCase($.fulfilled,((e,t)=>{e.pending=!1,e.results=[...t.payload.content]})).addCase($.rejected,(e=>{e.pending=!1,e.error=!0})).addCase(k.pending,(e=>{e.pending=!0})).addCase(k.fulfilled,((e,t)=>{e.pending=!1,e.results=[...t.payload.content]})).addCase(k.rejected,(e=>{e.pending=!1,e.error=!0})).addCase(v.fulfilled,((e,t)=>{e.quickSearchCategories=t.payload}))}}),{closeSearch:O,openSearch:L,setSearchQuery:w,resetSearch:b,closeSearchIfOpen:x}=_.actions,A=_}}]);